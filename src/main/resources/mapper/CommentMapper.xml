<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qfedu.mapper.ICommentMapper">
    <resultMap id="comments" type="Comment">
        <id column="com_id" property="comId"/>
        <collection property="articleId" column="article_id"/>
        <collection property="nickname" column="nickname"/>
        <collection property="content" column="content"/>
        <collection property="email" column="email"/>
        <collection property="ip" column="ip"/>
        <collection property="device" column="device"/>
        <collection property="address" column="address"/>
        <collection property="createTime" column="create_time"/>
    </resultMap>
    <select id="findByArticleid" resultMap="comments">
        SELECT tcm.nickname,tcm.content from tb_comment tcm
        INNER JOIN tb_article tar ON tcm.article_id = tar.article_id
        WHERE tar.article_id=#{articleid}
    </select>

    <select id="findByUserid" resultMap="comments">
select tcm.nickname,tcm.content from tb_comment tcm
INNER JOIN tb_article tar ON tcm.article_id = tar.article_id
INNER JOIN tb_user tu on tar.author = tu.username
WHERE tu.uid  = #{uid}
    </select>
</mapper>